<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<title>Calcular distancia entre cidades (mapas e rotas)</title>
	<!-- 
	<script src="http://code.jquery.com/jquery-1.8.1.js"
		type="text/javascript"></script>
	 -->
</h:head>
<h:body>
	<script type="text/javascript">
		function geocode() {
			PF('geoMap').geocode(document.getElementById('address').value);
		}

		function reverseGeocode() {
			var lat = document.getElementById('lat').value, lng = document
					.getElementById('lng').value;

			PF('revGeoMap').reverseGeocode(lat, lng);
		}
	</script>

	<h:form prependId="true">

		<h3 style="margin-top: 0">Geocode</h3>
		<h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">
			<p:outputLabel for="address" value="Address:" />
			<p:inputText id="address" />
			<p:commandButton value="buscar" icon="ui-icon-search"
				onclick="geocode()" type="button" />
		</h:panelGrid>

		<p:gmap id="geoGmap" widgetVar="geoMap"
			center="#{testeCtrl.centerGeoMap}" zoom="2" type="ROADMAP"
			model="#{testeCtrl.geoModel}" style="width:100%;height:400px">
			<p:ajax event="geocode" listener="#{testeCtrl.onGeocode}"
				update="@this" />
		</p:gmap>
	
	</h:form>
	<!--  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript">
		function CalculaDistancia() {
			$('#litResultado').html('Aguarde...');
			//Instanciar o DistanceMatrixService
			var service = new google.maps.DistanceMatrixService();
			//executar o DistanceMatrixService
			service.getDistanceMatrix({
				//Origem
				origins : [ $("#txtOrigem").val() ],
				//Destino
				destinations : [ $("#txtDestino").val() ],
				//Modo (DRIVING | WALKING | BICYCLING)
				travelMode : google.maps.TravelMode.DRIVING,
				//Sistema de medida (METRIC | IMPERIAL)
				unitSystem : google.maps.UnitSystem.METRIC
			//Vai chamar o callback
			}, callback);
		}
		//Tratar o retorno do DistanceMatrixService
		function callback(response, status) {
			//Verificar o Status
			if (status != google.maps.DistanceMatrixStatus.OK)
				//Se o status não for "OK"
				$('#litResultado').html(status);
			else {
				//Se o status for OK
				//Endereço de origem = response.originAddresses
				//Endereço de destino = response.destinationAddresses
				//Distância = response.rows[0].elements[0].distance.text
				//Duração = response.rows[0].elements[0].duration.text
				$('#litResultado').html(
						"<strong>Origem</strong>: " + response.originAddresses
								+ "<br /><strong>Destino:</strong> "
								+ response.destinationAddresses
								+ "<br /><strong>Distância</strong>: "
								+ response.rows[0].elements[0].distance.text);
				//Atualizar o mapa
				$("#map").attr(
						"src",
						"https://maps.google.com/maps?saddr="
								+ response.originAddresses + "#38="
								+ response.destinationAddresses
								+ "#38output=embed");
			}
		}
	</script>
	<table width="100%" cellspacing="0" cellpadding="0" border="0">
		<tbody>
			<tr>
				<td><label for="txtOrigem"><strong>Endere&ccedil;o
							de origem</strong></label> <input type="text" id="txtOrigem" class="field"
					style="width: 400px" /></td>
			</tr>
			<tr>
				<td><label for="txtDestino"><strong>Endere&ccedil;o
							de destino</strong></label> <input type="text" style="width: 400px" class="field"
					id="txtDestino" /></td>
			</tr>
			<tr>
				<td><input type="button" value="Calcular dist&acirc;ncia"
					onclick="CalculaDistancia()" class="btnNew" /></td>
			</tr>
		</tbody>
	</table>
	<div>
		<span id="litResultado">&nbsp;</span>
	</div>
	<div style="padding: 10px 0 0; clear: both">
		<iframe scrolling="no"
			src="https://maps.google.com/maps?saddr=s&atilde;o paulo&amp;daddr=rio de janeiro&amp;output=embed"
			marginwidth="0" marginheight="0" id="map" width="350" height="350"
			frameborder="0"></iframe>

	</div> -->
</h:body>
</html>